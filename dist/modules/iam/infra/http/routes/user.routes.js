"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.userRouter = void 0;
const express_1 = __importDefault(require("express"));
const multer_1 = __importDefault(require("multer"));
const upload_1 = __importDefault(require("../../../../../config/upload"));
const ensureAuthenticated_1 = require("../../../../../shared/infra/http/middleware/ensureAuthenticated");
const createUser_1 = require("../../../useCases/createUser");
const login_1 = require("../../../useCases/login");
const getUserProfile_1 = require("../../../useCases/getUserProfile");
const updateUserProfile_1 = require("../../../useCases/updateUserProfile");
const deleteAccount_1 = require("../../../useCases/deleteAccount");
const searchUsers_1 = require("../../../useCases/searchUsers");
const updateNotificationToken_1 = require("../../../useCases/updateNotificationToken");
const updateUserAvatar_1 = require("../../../useCases/updateUserAvatar");
const userRouter = express_1.default.Router();
exports.userRouter = userRouter;
const upload = (0, multer_1.default)(upload_1.default);
userRouter.post('/signup', (req, res) => createUser_1.createUserController.execute(req, res));
userRouter.post('/login', (req, res) => login_1.loginController.execute(req, res));
userRouter.get('/me', ensureAuthenticated_1.ensureAuthenticated, (req, res) => getUserProfile_1.getUserProfileController.execute(req, res));
userRouter.put('/me', ensureAuthenticated_1.ensureAuthenticated, (req, res) => updateUserProfile_1.updateUserProfileController.execute(req, res));
userRouter.delete('/me', ensureAuthenticated_1.ensureAuthenticated, (req, res) => deleteAccount_1.deleteAccountController.execute(req, res));
userRouter.get('/search', ensureAuthenticated_1.ensureAuthenticated, (req, res) => searchUsers_1.searchUsersController.execute(req, res));
userRouter.patch('/notification-token', ensureAuthenticated_1.ensureAuthenticated, (req, res) => updateNotificationToken_1.updateNotificationTokenController.execute(req, res));
userRouter.patch('/avatar', ensureAuthenticated_1.ensureAuthenticated, upload.single('avatar'), (req, res) => updateUserAvatar_1.updateUserAvatarController.execute(req, res));
